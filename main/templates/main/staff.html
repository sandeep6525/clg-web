{% extends "base.html" %}
{% load static %}

{% block title %}Staff ‚Ä¢ Computer Science Department{% endblock %}

{% block extra_css %}
<style>
  :root {
    --bg-gradient-start: #1a2332;
    --bg-gradient-end: #1e40af;
    --accent: #d4af37;
    --muted: #64748b;
    --card-bg: rgba(255, 255, 255, 0.98);
    --shadow-light: 0 4px 12px rgba(0, 0, 0, 0.08);
    --shadow-strong: 0 20px 40px -10px rgba(0, 0, 0, 0.2);
  }

  .gradient-bg {
    background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
    position: relative;
  }

  body {
    font-family: 'Georgia', 'Times New Roman', serif;
    line-height: 1.6;
  }

  .hover-lift {
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }
  .hover-lift:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: var(--shadow-strong);
  }

  .hover-glow {
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  .hover-glow::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.12), transparent);
    transition: left 0.6s ease;
  }
  .hover-glow:hover::before { left: 100%; }

  .btn-primary {
    background: var(--accent);
    color: #111;
    border: 2px solid var(--accent);
    font-weight: 600;
    letter-spacing: 0.5px;
    position: relative;
    overflow: hidden;
  }

  .hero h1 {
    background: linear-gradient(135deg, #ffffff, #d4af37);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .staff-card {
    background: var(--card-bg);
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: var(--shadow-light);
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    text-align: center;
    display: flex;
    flex-direction: column;
  }
  .staff-card img {
    width: 100%;
    height: 220px;
    object-fit: cover;
    display: block;
  }
  .staff-card .card-body { padding: 1rem; flex: 1 0 auto; }
  .staff-card h3 { margin: 0.5rem 0 0.25rem; font-size: 1.125rem; color: #111; }
  .staff-meta { color: #4b5563; font-size: 0.95rem; margin-bottom: 0.5rem; }

  .hod-badge {
    background: var(--accent);
    color: #111;
    padding: 4px 8px;
    border-radius: 999px;
    font-weight: 700;
    font-size: 0.8rem;
    margin-left: 6px;
  }

  .contact-row { margin-top: 0.5rem; font-size: 0.95rem; color:#374151; }
  .contact-row a { color: inherit; text-decoration: none; }
  .contact-row .phone { display:block; margin-top:0.25rem; }

  .staff-tabs { display:flex; gap:8px; justify-content:center; margin-bottom:1.5rem; }
  .tab-btn { background:transparent; border:1px solid rgba(0,0,0,0.06); padding:8px 12px; border-radius:8px; cursor:pointer; color:inherit; }
  .tab-btn.active { background: rgba(0,0,0,0.03); box-shadow: 0 4px 12px rgba(0,0,0,0.06); }

  @media (min-width: 1024px) {
    .grid-lg-4 { grid-template-columns: repeat(4, 1fr); }
  }

  .tab-btn:focus, a:focus, button:focus { outline:3px solid rgba(212,175,55,0.18); outline-offset:3px; }
</style>
{% endblock %}

{% block content %}
<main id="main" role="main">
  <!-- Hero Section -->
  <header class="gradient-bg py-24 relative overflow-hidden hero" aria-labelledby="page-heading">
    <div class="absolute inset-0 bg-gradient-to-b from-black/8 to-black/4"></div>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center text-white">
      <nav class="breadcrumb mb-6" aria-label="Breadcrumb">
        <ol class="flex items-center justify-center gap-3 text-sm">
          <li><a href="{% url 'home' %}" class="hover:text-yellow-300 transition-colors">Home</a></li>
          <li class="opacity-60">‚Ä∫</li>
          <li class="opacity-90 font-medium" aria-current="page">Our Staff</li>
        </ol>
      </nav>

      <h1 id="page-heading" class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6">
        Meet Our Team
      </h1>

      <p class="text-lg md:text-xl lg:text-2xl mb-8 max-w-4xl mx-auto opacity-95 text-white/95">
        Meet our exceptional team of faculty and staff who advance education and research.
      </p>
    </div>
  </header>

  <!-- Tabs (visual only) -->
  <section class="py-6">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="staff-tabs" role="tablist" aria-label="Staff sections">
        <button class="tab-btn active" data-tab="all" role="tab" aria-selected="true">All Staff</button>
        <button class="tab-btn" data-tab="faculty" role="tab" aria-selected="false">Faculty</button>
        <button class="tab-btn" data-tab="leadership" role="tab" aria-selected="false">Leadership</button>
        <button class="tab-btn" data-tab="support" role="tab" aria-selected="false">Support Staff</button>
      </div>
    </div>
  </section>

  <!-- All Staff (default visible) -->
  <section id="all" class="py-12 fade-up tab-content" aria-labelledby="all-heading">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 id="all-heading" class="text-3xl font-bold mb-6 text-center">All Staff</h2>

      {% if all_staff %}
        <div class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
          {% for member in all_staff %}
            <div class="staff-card hover-lift {% if member.is_hod %}hover-glow{% endif %}">
              {% if member.photo %}
                <img src="{{ member.photo.url }}" alt="{{ member.name }}" loading="lazy" decoding="async" style="height:220px; width:100%; object-fit:cover;">
              {% else %}
                <img src="{% static 'img/default-profile.png' %}" alt="{{ member.name }}" loading="lazy" decoding="async" style="height:220px; width:100%; object-fit:cover;">
              {% endif %}

              <div class="card-body">
                <div style="display:flex; align-items:center; justify-content:center; gap:8px; flex-wrap:wrap;">
                  <h3 style="margin:0;">{{ member.name }}</h3>
                  {% if member.is_hod %}
                    <span class="hod-badge" aria-label="Head of Department">HOD</span>
                  {% endif %}
                </div>

                <p class="text-indigo-600 font-medium">{{ member.designation|default:member.role }}</p>

                <div class="contact-row">
                  {% if member.phone %}<span class="phone">üìû {{ member.phone }}</span>{% endif %}
                  {% if member.email %}<a href="mailto:{{ member.email }}">‚úâÔ∏è {{ member.email }}</a>{% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-gray-500 text-center">No staff records found.</p>
      {% endif %}
    </div>
  </section>

  <!-- (Optional) Faculty / Leadership / Support sections kept for tab switching -->
  <section id="faculty" class="py-12 fade-up tab-content hidden" aria-labelledby="faculty-heading">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 id="faculty-heading" class="text-3xl font-bold mb-6 text-center">Faculty Members</h2>
      {% if faculty %}
        <div class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
          {% for f in faculty %}
            <div class="staff-card hover-lift {% if f.is_hod %}hover-glow{% endif %}">
              {% if f.photo %}
                <img src="{{ f.photo.url }}" alt="{{ f.name }}" loading="lazy" decoding="async" style="height:220px; width:100%; object-fit:cover;">
              {% else %}
                <img src="{% static 'img/default-profile.png' %}" alt="{{ f.name }}" loading="lazy" decoding="async" style="height:220px; width:100%; object-fit:cover;">
              {% endif %}
              <div class="card-body">
                <div style="display:flex; align-items:center; justify-content:center; gap:8px; flex-wrap:wrap;">
                  <h3 style="margin:0;">{{ f.name }}</h3>
                  {% if f.is_hod %}<span class="hod-badge">HOD</span>{% endif %}
                </div>
                <p class="text-indigo-600 font-medium">{{ f.designation|default:f.role }}</p>
                <div class="contact-row">
                  {% if f.phone %}<span class="phone">üìû {{ f.phone }}</span>{% endif %}
                  {% if f.email %}<a href="mailto:{{ f.email }}">‚úâÔ∏è {{ f.email }}</a>{% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-gray-500 text-center">No faculty records found.</p>
      {% endif %}
    </div>
  </section>

  <section id="leadership" class="py-12 fade-up tab-content hidden" aria-labelledby="leadership-heading">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 id="leadership-heading" class="text-3xl font-bold mb-6 text-center">Department Leadership</h2>
      {% if hod_list %}
        <div class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
          {% for hod in hod_list %}
            <div class="staff-card hover-lift hover-glow">
              {% if hod.photo %}
                <img src="{{ hod.photo.url }}" alt="{{ hod.name }}" loading="lazy" decoding="async" style="height:220px; width:100%; object-fit:cover;">
              {% else %}
                <img src="{% static 'img/default-profile.png' %}" alt="{{ hod.name }}" loading="lazy" decoding="async" style="height:220px; width:100%; object-fit:cover;">
              {% endif %}
              <div class="card-body">
                <div style="display:flex; align-items:center; justify-content:center; gap:8px;">
                  <h3 style="margin:0;">{{ hod.name }}</h3>
                  <span class="hod-badge">HOD</span>
                </div>
                <p class="text-indigo-600 font-medium">{{ hod.designation|default:hod.role }}</p>
                <div class="contact-row">
                  {% if hod.phone %}<span class="phone">üìû {{ hod.phone }}</span>{% endif %}
                  {% if hod.email %}<a href="mailto:{{ hod.email }}">‚úâÔ∏è {{ hod.email }}</a>{% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-gray-500 text-center">No leadership records found.</p>
      {% endif %}
    </div>
  </section>

  <section id="support" class="py-12 fade-up tab-content hidden" aria-labelledby="support-heading">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 id="support-heading" class="text-3xl font-bold mb-6 text-center">Support Staff</h2>
      {% if support %}
        <div class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
          {% for s in support %}
            <div class="staff-card hover-lift">
              {% if s.photo %}
                <img src="{{ s.photo.url }}" alt="{{ s.name }}" loading="lazy" decoding="async" style="height:220px; width:100%; object-fit:cover;">
              {% else %}
                <img src="{% static 'img/default-profile.png' %}" alt="{{ s.name }}" loading="lazy" decoding="async" style="height:220px; width:100%; object-fit:cover;">
              {% endif %}
              <div class="card-body">
                <h3>{{ s.name }}</h3>
                <p class="text-indigo-600 font-medium">{{ s.role }}</p>
                <div class="contact-row">
                  {% if s.phone %}<span class="phone">üìû {{ s.phone }}</span>{% endif %}
                  {% if s.email %}<a href="mailto:{{ s.email }}">‚úâÔ∏è {{ s.email }}</a>{% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-gray-500 text-center">No support staff records found.</p>
      {% endif %}
    </div>
  </section>

  <!-- CTA -->
  <section class="py-16 gradient-bg text-center text-white fade-up">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <h3 class="text-3xl md:text-4xl font-bold mb-4">Want to be part of our team?</h3>
      <p class="text-white/90 mb-8">We‚Äôre always looking for passionate educators and staff to join us.</p>
      <div class="flex flex-col sm:flex-row justify-center gap-4 sm:gap-6 ">
        <a href="{% url 'contact' %}" class="btn-primary px-8 py-4 rounded-lg text-lg font-semibold hover-lift" style="color: black;">
          Contact Our Department
        </a>
        <a href="{% url 'news' %}" class="btn-ghost px-8 py-4 rounded-lg text-lg font-semibold hover-lift">
          Latest News & Updates
        </a>
      </div>
    </div>
  </section>
</main>
{% endblock %}

{% block extra_js %}
<script>
  // Tabs switching (visual only; default shows "All Staff")
  const tabs = document.querySelectorAll('.tab-btn');
  const contents = document.querySelectorAll('.tab-content');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => { t.classList.remove('active'); t.setAttribute('aria-selected','false'); });
      tab.classList.add('active'); tab.setAttribute('aria-selected','true');

      contents.forEach(c => { c.classList.add('hidden'); c.classList.remove('animate-fade-in-up'); });

      const content = document.getElementById(tab.dataset.tab || tab.getAttribute('data-tab'));
      if (content) {
        content.classList.remove('hidden');
        setTimeout(() => content.classList.add('animate-fade-in-up'), 50);
      }
    });
  });

  document.addEventListener('DOMContentLoaded', () => {
    // Ensure the default "all" section is visible
    const defaultTab = document.querySelector('.tab-btn.active') || document.querySelector('.tab-btn[data-tab="all"]');
    if (defaultTab) defaultTab.click();
  });

  // Simple intersection animation for staff cards
  const observeElements = () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.animationDelay = Math.random() * 0.5 + 's';
          entry.target.classList.add('animate-fade-in-up');
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.staff-card').forEach(el => observer.observe(el));
  };

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', observeElements);
  } else {
    observeElements();
  }
</script>
{% endblock %}
